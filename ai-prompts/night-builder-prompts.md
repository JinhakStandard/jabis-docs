# JABIS Night Builder - ì•¼ê°„ ìë™ êµ¬í˜„ ì‹œìŠ¤í…œ

> ë¹„ê°œë°œìê°€ ë‚®ì— ìš”ì²­í•˜ë©´, AIê°€ ë°¤ì— ìë™ìœ¼ë¡œ êµ¬í˜„í•˜ê³  ë°°í¬í•˜ëŠ” ì‹œìŠ¤í…œ

---

## ì‹œìŠ¤í…œ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì—…ë¬´ ì‹œê°„ (Day)                                     â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚   ë¹„ê°œë°œì    â”‚     â”‚  AI ìš”ì²­     â”‚     â”‚   Request    â”‚                    â”‚
â”‚  â”‚   ë‹´ë‹¹ì      â”‚â”€â”€â”€â”€â–¶â”‚  ì±—ë´‡ UI    â”‚â”€â”€â”€â”€â–¶â”‚   Queue DB   â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                                 â”‚
â”‚  ìš”ì²­ ì˜ˆì‹œ:                                                                     â”‚
â”‚  - "íšŒì›ê°€ì…ì— íœ´ëŒ€í° ì¸ì¦ ì¶”ê°€í•´ì£¼ì„¸ìš”"                                          â”‚
â”‚  - "ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì—‘ì…€ë¡œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ì„¸ìš”"                                 â”‚
â”‚  - "ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì— ì¼ë³„ í†µê³„ ì°¨íŠ¸ ì¶”ê°€í•´ì£¼ì„¸ìš”"                                 â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ ì €ë… 6ì‹œ ì´í›„
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì•¼ê°„ ì‹œê°„ (Night)                                   â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        Night Builder Engine                               â”‚  â”‚
â”‚  â”‚                                                                          â”‚  â”‚
â”‚  â”‚   while (queue.hasNext() && isNightTime()) {                             â”‚  â”‚
â”‚  â”‚                                                                          â”‚  â”‚
â”‚  â”‚     1. ìš”ì²­ ë¶„ì„ (Planner Agent)                                         â”‚  â”‚
â”‚  â”‚        â””â”€â–¶ DDL í•„ìš”? â†’ API Gateway ìŠ¤í‚¤ë§ˆ ìš”ì²­                           â”‚  â”‚
â”‚  â”‚        â””â”€â–¶ ì™¸ë¶€ API í•„ìš”? â†’ ì—°ë™ ì •ë³´ í™•ì¸                               â”‚  â”‚
â”‚  â”‚                                                                          â”‚  â”‚
â”‚  â”‚     2. ì½”ë“œ êµ¬í˜„ (AI Orchestra)                                          â”‚  â”‚
â”‚  â”‚        â””â”€â–¶ git checkout -b feature/{request-id}                          â”‚  â”‚
â”‚  â”‚        â””â”€â–¶ Coder + Debugger + Reviewer                                   â”‚  â”‚
â”‚  â”‚                                                                          â”‚  â”‚
â”‚  â”‚     3. í…ŒìŠ¤íŠ¸ & ê²€ì¦                                                      â”‚  â”‚
â”‚  â”‚        â””â”€â–¶ npm test, lint, type-check                                    â”‚  â”‚
â”‚  â”‚        â””â”€â–¶ E2E í…ŒìŠ¤íŠ¸ (ì„ íƒ)                                             â”‚  â”‚
â”‚  â”‚                                                                          â”‚  â”‚
â”‚  â”‚     4. ë°°í¬                                                               â”‚  â”‚
â”‚  â”‚        â””â”€â–¶ git push â†’ ArgoCD ìë™ ë°°í¬                                   â”‚  â”‚
â”‚  â”‚        â””â”€â–¶ ìš”ì²­ ìƒíƒœ = "ì™„ë£Œ"                                            â”‚  â”‚
â”‚  â”‚                                                                          â”‚  â”‚
â”‚  â”‚   }                                                                      â”‚  â”‚
â”‚  â”‚                                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                            â˜€ï¸ ì•„ì¹¨ ì¶œê·¼ â†’ êµ¬í˜„ ì™„ë£Œ!
```

---

## Part 1: AI ìš”ì²­ ì±—ë´‡ UI

### í”„ë¡¬í”„íŠ¸ 1-1: ìš”ì²­ ì…ë ¥ ì±—ë´‡ ì¸í„°í˜ì´ìŠ¤

```
React + TypeScriptë¡œ JABIS ì‚¬ì´íŠ¸ì— ë“¤ì–´ê°ˆ "AI ìš”ì²­" ì±—ë´‡ UIë¥¼ ë§Œë“¤ì–´ì¤˜.

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **ì±—ë´‡ ìŠ¤íƒ€ì¼ ì¸í„°í˜ì´ìŠ¤**
   - ìš°ì¸¡ í•˜ë‹¨ í”Œë¡œíŒ… ë²„íŠ¼ìœ¼ë¡œ ì—´ê¸°/ë‹«ê¸°
   - ëŒ€í™”í˜• UI (ì‚¬ìš©ì ì…ë ¥ + AI ì‘ë‹µ í˜•íƒœ)
   - ëª¨ë°”ì¼ ë°˜ì‘í˜•

2. **ìš”ì²­ ì…ë ¥ í”Œë¡œìš°**
   ```
   Step 1: ìš”ì²­ ìœ í˜• ì„ íƒ
   - ìƒˆ ê¸°ëŠ¥ ì¶”ê°€
   - ê¸°ì¡´ ê¸°ëŠ¥ ìˆ˜ì •
   - UI/UX ê°œì„ 
   - ë²„ê·¸ ìˆ˜ì • ìš”ì²­
   - ê¸°íƒ€
   
   Step 2: ìƒì„¸ ë‚´ìš© ì…ë ¥
   - ììœ  í…ìŠ¤íŠ¸ ì…ë ¥
   - íŒŒì¼ ì²¨ë¶€ (ìŠ¤í¬ë¦°ìƒ·, ê¸°íšì„œ ë“±)
   - ì°¸ê³  URL ì…ë ¥
   
   Step 3: ìš°ì„ ìˆœìœ„ ì„ íƒ
   - ê¸´ê¸‰ (ë‹¹ì¼ ì²˜ë¦¬ ì‹œë„)
   - ë³´í†µ (ìˆœì„œëŒ€ë¡œ)
   - ë‚®ìŒ (ì—¬ìœ  ìˆì„ ë•Œ)
   
   Step 4: í™•ì¸ ë° ì œì¶œ
   - ìš”ì²­ ìš”ì•½ ë³´ì—¬ì£¼ê¸°
   - AIê°€ ì´í•´í•œ ë‚´ìš© í™•ì¸ (Planner ìš”ì•½)
   - ìˆ˜ì • ë˜ëŠ” ì œì¶œ
   ```

3. **ìš”ì²­ ëª©ë¡ ì¡°íšŒ**
   - ë‚´ê°€ í•œ ìš”ì²­ ëª©ë¡
   - ìƒíƒœë³„ í•„í„°: ëŒ€ê¸°ì¤‘, ì§„í–‰ì¤‘, ì™„ë£Œ, ì‹¤íŒ¨
   - ìƒì„¸ ë³´ê¸° (êµ¬í˜„ ê²°ê³¼, ë³€ê²½ëœ íŒŒì¼ ë“±)

4. **ì‹¤ì‹œê°„ ì•Œë¦¼**
   - ìš”ì²­ ìƒíƒœ ë³€ê²½ ì‹œ ì•Œë¦¼
   - êµ¬í˜„ ì™„ë£Œ ì‹œ "í™•ì¸í•´ë³´ì„¸ìš”" ë§í¬

## íƒ€ì… ì •ì˜

```typescript
interface FeatureRequest {
  id: string;
  projectId: string;
  
  // ìš”ì²­ ì •ë³´
  type: 'new_feature' | 'modification' | 'ui_improvement' | 'bug_fix' | 'other';
  title: string;
  description: string;
  attachments: Attachment[];
  referenceUrls: string[];
  priority: 'urgent' | 'normal' | 'low';
  
  // AI ë¶„ì„ ê²°ê³¼
  analysis?: {
    summary: string;           // AIê°€ ì´í•´í•œ ìš”ì•½
    estimatedComplexity: 'simple' | 'medium' | 'complex';
    requiredChanges: string[]; // ì˜ˆìƒ ë³€ê²½ ì‚¬í•­
    requiresDDL: boolean;      // DB ìŠ¤í‚¤ë§ˆ ë³€ê²½ í•„ìš” ì—¬ë¶€
    ddlDescription?: string;   // DDL ë³€ê²½ ì„¤ëª…
    estimatedTime: string;     // ì˜ˆìƒ ì†Œìš” ì‹œê°„
  };
  
  // ìƒíƒœ
  status: RequestStatus;
  statusHistory: StatusChange[];
  
  // ê²°ê³¼
  result?: {
    success: boolean;
    commitHash?: string;
    prUrl?: string;
    changedFiles?: string[];
    deployedAt?: string;
    errorMessage?: string;
  };
  
  // ë©”íƒ€
  requesterId: string;
  requesterName: string;
  createdAt: string;
  updatedAt: string;
  scheduledFor?: string;  // ì²˜ë¦¬ ì˜ˆì • ì‹œê°„
  completedAt?: string;
}

type RequestStatus = 
  | 'draft'           // ì‘ì„± ì¤‘
  | 'submitted'       // ì œì¶œë¨
  | 'analyzing'       // AI ë¶„ì„ ì¤‘
  | 'waiting_approval'// DDL ìŠ¹ì¸ ëŒ€ê¸°
  | 'queued'          // í ëŒ€ê¸° ì¤‘
  | 'in_progress'     // êµ¬í˜„ ì¤‘
  | 'testing'         // í…ŒìŠ¤íŠ¸ ì¤‘
  | 'deploying'       // ë°°í¬ ì¤‘
  | 'completed'       // ì™„ë£Œ
  | 'failed'          // ì‹¤íŒ¨
  | 'cancelled';      // ì·¨ì†Œë¨

interface Attachment {
  id: string;
  filename: string;
  url: string;
  type: 'image' | 'document' | 'other';
  size: number;
}
```

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
jabis-request-chatbot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ChatBot/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatBot.tsx           # ë©”ì¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatWindow.tsx        # ì±„íŒ… ì°½
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageBubble.tsx     # ë©”ì‹œì§€ ë²„ë¸”
â”‚   â”‚   â”‚   â”œâ”€â”€ RequestForm.tsx       # ìš”ì²­ í¼ (Stepë³„)
â”‚   â”‚   â”‚   â”œâ”€â”€ RequestTypeSelector.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PrioritySelector.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUploader.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ConfirmationStep.tsx
â”‚   â”‚   â”œâ”€â”€ RequestList/
â”‚   â”‚   â”‚   â”œâ”€â”€ RequestList.tsx       # ìš”ì²­ ëª©ë¡
â”‚   â”‚   â”‚   â”œâ”€â”€ RequestCard.tsx       # ìš”ì²­ ì¹´ë“œ
â”‚   â”‚   â”‚   â”œâ”€â”€ RequestDetail.tsx     # ìƒì„¸ ëª¨ë‹¬
â”‚   â”‚   â”‚   â””â”€â”€ StatusBadge.tsx
â”‚   â”‚   â””â”€â”€ common/
â”‚   â”‚       â””â”€â”€ FloatingButton.tsx
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useRequests.ts
â”‚   â”‚   â””â”€â”€ useSocket.ts
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ requestApi.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

## UI ë””ìì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– AI ê¸°ëŠ¥ ìš”ì²­                 âœ•  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–¤ ê¸°ëŠ¥ì´      â”‚   â”‚
â”‚  â”‚ í•„ìš”í•˜ì‹ ê°€ìš”?               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚       â”‚ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì—‘ì…€ë¡œ      â”‚  â”‚
â”‚       â”‚ ë‹¤ìš´ë¡œë“œ í•  ìˆ˜ ìˆê²Œ     â”‚  â”‚
â”‚       â”‚ í•´ì£¼ì„¸ìš”.              â”‚  â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ë„¤, ì´í•´í–ˆìŠµë‹ˆë‹¤! ğŸ“‹        â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚ ìš”ì•½: ê²€ìƒ‰ ê²°ê³¼ ì—‘ì…€ ë‚´ë³´ë‚´ê¸°â”‚   â”‚
â”‚  â”‚ ì˜ˆìƒ ë³µì¡ë„: ë³´í†µ           â”‚   â”‚
â”‚  â”‚ DB ë³€ê²½: ë¶ˆí•„ìš”             â”‚   â”‚
â”‚  â”‚ ì˜ˆìƒ ì‹œê°„: 2-3ì‹œê°„          â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚ [ìˆ˜ì •í•˜ê¸°] [ì œì¶œí•˜ê¸° âœ“]     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...      ğŸ“  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ì§„í•™ì–´í”Œë¼ì´ ë””ìì¸ ì‹œìŠ¤í…œ(íŒŒë€ìƒ‰ #2563eb)ì— ë§ê²Œ 
shadcn/ui ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì–´ì¤˜.
```

---

### í”„ë¡¬í”„íŠ¸ 1-2: ìš”ì²­ ë¶„ì„ API (Planner ì—°ë™)

```
Node.js + TypeScriptë¡œ ì‚¬ìš©ì ìš”ì²­ì„ AIê°€ ë¶„ì„í•˜ëŠ” APIë¥¼ ë§Œë“¤ì–´ì¤˜.

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **ìš”ì²­ ë¶„ì„ ì—”ë“œí¬ì¸íŠ¸**
   - POST /api/requests/analyze
   - ì‚¬ìš©ì ì…ë ¥ì„ AI Plannerê°€ ë¶„ì„
   - ë¶„ì„ ê²°ê³¼ ë°˜í™˜

2. **ë¶„ì„ ë‚´ìš©**
   - ìš”ì²­ ìš”ì•½ (í•œ ì¤„)
   - ë³µì¡ë„ íŒë‹¨
   - í•„ìš”í•œ ë³€ê²½ ì‚¬í•­ ëª©ë¡
   - DDL í•„ìš” ì—¬ë¶€ ë° ë‚´ìš©
   - ì˜ˆìƒ ì†Œìš” ì‹œê°„
   - ì˜ì¡´ì„± (ë‹¤ë¥¸ ê¸°ëŠ¥ê³¼ ì—°ê´€)

3. **AI í”„ë¡¬í”„íŠ¸**

```typescript
const analyzePrompt = `
# ê¸°ëŠ¥ ìš”ì²­ ë¶„ì„

## í”„ë¡œì íŠ¸ ì •ë³´
- í”„ë¡œì íŠ¸: ${projectName}
- ê¸°ìˆ  ìŠ¤íƒ: React, Node.js, TypeScript, PostgreSQL
- ê¸°ì¡´ êµ¬ì¡°: ${projectStructure}

## ì‚¬ìš©ì ìš”ì²­
${userRequest}

## ì²¨ë¶€ íŒŒì¼
${attachments.map(a => `- ${a.filename}: ${a.description}`).join('\n')}

## ë¶„ì„ ì§€ì‹œì‚¬í•­

ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ë¶„ì„ ê²°ê³¼ë¥¼ JSONìœ¼ë¡œ ì¶œë ¥í•˜ì„¸ìš”:

{
  "summary": "ìš”ì²­ì„ í•œ ì¤„ë¡œ ìš”ì•½",
  "estimatedComplexity": "simple | medium | complex",
  "requiredChanges": [
    "ë³€ê²½ ì‚¬í•­ 1",
    "ë³€ê²½ ì‚¬í•­ 2"
  ],
  "affectedFiles": [
    "src/pages/Search.tsx",
    "src/api/export.ts"
  ],
  "requiresDDL": true | false,
  "ddlChanges": [
    {
      "type": "ADD_COLUMN | CREATE_TABLE | ALTER_TABLE | ...",
      "table": "í…Œì´ë¸”ëª…",
      "description": "ë³€ê²½ ì„¤ëª…",
      "sql": "ALTER TABLE ... ADD COLUMN ..."
    }
  ],
  "externalDependencies": [
    {
      "name": "xlsx",
      "version": "^0.18.5",
      "reason": "ì—‘ì…€ íŒŒì¼ ìƒì„±ì„ ìœ„í•´ í•„ìš”"
    }
  ],
  "estimatedTime": "2-3ì‹œê°„",
  "risks": [
    "ì£¼ì˜í•´ì•¼ í•  ì‚¬í•­"
  ],
  "clarificationNeeded": [
    "ì¶”ê°€ë¡œ í™•ì¸ì´ í•„ìš”í•œ ì‚¬í•­ (ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´)"
  ]
}
`;
```

4. **DDL ë¶„ì„ ì‹œ ì¶”ê°€ ê²€ì¦**
   - ê¸°ì¡´ í…Œì´ë¸”ê³¼ ì¶©ëŒ ì—¬ë¶€
   - ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš” ì—¬ë¶€
   - ë°ì´í„° ì†ì‹¤ ìœ„í—˜ ì—¬ë¶€

## API êµ¬ì¡°

```typescript
// POST /api/requests
// ìš”ì²­ ìƒì„±
interface CreateRequestBody {
  type: RequestType;
  title: string;
  description: string;
  attachmentIds: string[];
  referenceUrls: string[];
  priority: Priority;
}

// POST /api/requests/:id/analyze
// ìš”ì²­ ë¶„ì„ (AI)
interface AnalyzeResponse {
  analysis: RequestAnalysis;
  needsClarification: boolean;
  clarificationQuestions: string[];
}

// POST /api/requests/:id/submit
// ìš”ì²­ ì œì¶œ (íì— ì¶”ê°€)
interface SubmitResponse {
  queuePosition: number;
  estimatedStartTime: string;
}

// GET /api/requests
// ë‚´ ìš”ì²­ ëª©ë¡
interface ListRequestsQuery {
  status?: RequestStatus;
  page?: number;
  limit?: number;
}
```

Express + Prismaë¡œ êµ¬í˜„í•˜ê³ ,
AI ë¶„ì„ì€ Claude API ì§ì ‘ í˜¸ì¶œí•´ì¤˜.
```

---

## Part 2: Request Queue ê´€ë¦¬

### í”„ë¡¬í”„íŠ¸ 2-1: ìš”ì²­ í ë° ìŠ¤ì¼€ì¤„ëŸ¬

```
Node.js + TypeScriptë¡œ ìš”ì²­ íì™€ ì•¼ê°„ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ë§Œë“¤ì–´ì¤˜.

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **ìš”ì²­ í ê´€ë¦¬**
   - ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì •ë ¬ (urgent > normal > low)
   - ê°™ì€ ìš°ì„ ìˆœìœ„ ë‚´ì—ì„œëŠ” FIFO
   - í”„ë¡œì íŠ¸ë³„ ê²©ë¦¬ (í•œ í”„ë¡œì íŠ¸ ì‹¤íŒ¨ê°€ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì— ì˜í–¥ X)

2. **ìŠ¤ì¼€ì¤„ëŸ¬**
   - ì„¤ì •ëœ ì•¼ê°„ ì‹œê°„ì—ë§Œ ì²˜ë¦¬ (ê¸°ë³¸: 22:00 ~ 06:00)
   - ì—…ë¬´ ì‹œê°„ì—ëŠ” íë§Œ ìŒ“ê³  ì²˜ë¦¬ ì•ˆ í•¨
   - ì²˜ë¦¬ ì¤‘ ì—…ë¬´ ì‹œê°„ ë˜ë©´ í˜„ì¬ ì‘ì—… ì™„ë£Œ í›„ ì¤‘ì§€

3. **ì²˜ë¦¬ ë¡œì§**
   ```
   1. íì—ì„œ ë‹¤ìŒ ìš”ì²­ ê°€ì ¸ì˜¤ê¸°
   2. ìƒíƒœ â†’ "in_progress"
   3. DDL í•„ìš”ì‹œ â†’ API Gatewayì— ìš”ì²­
   4. AI Orchestra ì‹¤í–‰
   5. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
   6. ì„±ê³µ â†’ ë°°í¬, ìƒíƒœ â†’ "completed"
      ì‹¤íŒ¨ â†’ ë¡¤ë°±, ìƒíƒœ â†’ "failed", ì¬ì‹œë„ íì— ì¶”ê°€ (ìµœëŒ€ 2íšŒ)
   7. ë‹¤ìŒ ìš”ì²­ ì²˜ë¦¬
   ```

4. **ë™ì‹œ ì²˜ë¦¬**
   - í”„ë¡œì íŠ¸ë³„ë¡œ 1ê°œì”©ë§Œ ë™ì‹œ ì²˜ë¦¬
   - ì „ì²´ ìµœëŒ€ ë™ì‹œ ì²˜ë¦¬: 3ê°œ (ë¦¬ì†ŒìŠ¤ ì œí•œ)

5. **ëª¨ë‹ˆí„°ë§**
   - í˜„ì¬ ì²˜ë¦¬ ì¤‘ì¸ ìš”ì²­
   - ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­ ìˆ˜
   - ì˜ˆìƒ ì™„ë£Œ ì‹œê°„

## íƒ€ì… ì •ì˜

```typescript
interface QueueConfig {
  // ìš´ì˜ ì‹œê°„
  operatingHours: {
    start: string;  // "22:00"
    end: string;    // "06:00"
    timezone: string; // "Asia/Seoul"
  };
  
  // ë™ì‹œ ì²˜ë¦¬
  concurrency: {
    maxTotal: number;      // ì „ì²´ ìµœëŒ€ (ê¸°ë³¸: 3)
    maxPerProject: number; // í”„ë¡œì íŠ¸ë‹¹ ìµœëŒ€ (ê¸°ë³¸: 1)
  };
  
  // ì¬ì‹œë„
  retry: {
    maxAttempts: number;  // ìµœëŒ€ ì¬ì‹œë„ (ê¸°ë³¸: 2)
    backoffMinutes: number; // ì¬ì‹œë„ ê°„ê²© (ê¸°ë³¸: 30)
  };
  
  // íƒ€ì„ì•„ì›ƒ
  timeout: {
    analysis: number;    // ë¶„ì„ íƒ€ì„ì•„ì›ƒ (ë¶„)
    implementation: number; // êµ¬í˜„ íƒ€ì„ì•„ì›ƒ (ë¶„)
    testing: number;     // í…ŒìŠ¤íŠ¸ íƒ€ì„ì•„ì›ƒ (ë¶„)
  };
}

interface QueueItem {
  requestId: string;
  projectId: string;
  priority: number;  // 1 (urgent) ~ 3 (low)
  attempts: number;
  scheduledFor: Date;
  createdAt: Date;
}

interface ProcessingStatus {
  requestId: string;
  projectId: string;
  stage: 'analyzing' | 'ddl_requesting' | 'implementing' | 'testing' | 'deploying';
  progress: number;  // 0-100
  startedAt: Date;
  estimatedCompletion: Date;
  logs: string[];
}
```

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
jabis-night-builder/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts
â”‚   â”œâ”€â”€ queue/
â”‚   â”‚   â”œâ”€â”€ RequestQueue.ts       # ìš°ì„ ìˆœìœ„ í
â”‚   â”‚   â”œâ”€â”€ QueueScheduler.ts     # ì•¼ê°„ ìŠ¤ì¼€ì¤„ëŸ¬
â”‚   â”‚   â””â”€â”€ QueueProcessor.ts     # í ì²˜ë¦¬ê¸°
â”‚   â”œâ”€â”€ processor/
â”‚   â”‚   â”œâ”€â”€ RequestProcessor.ts   # ìš”ì²­ ì²˜ë¦¬ ë©”ì¸
â”‚   â”‚   â”œâ”€â”€ DDLHandler.ts         # DDL ìš”ì²­ ì²˜ë¦¬
â”‚   â”‚   â”œâ”€â”€ ImplementationRunner.ts # AI Orchestra ì‹¤í–‰
â”‚   â”‚   â””â”€â”€ DeploymentHandler.ts  # ë°°í¬ ì²˜ë¦¬
â”‚   â”œâ”€â”€ scheduler/
â”‚   â”‚   â”œâ”€â”€ TimeChecker.ts        # ìš´ì˜ ì‹œê°„ ì²´í¬
â”‚   â”‚   â””â”€â”€ CronManager.ts        # í¬ë¡  ê´€ë¦¬
â”‚   â”œâ”€â”€ monitoring/
â”‚   â”‚   â”œâ”€â”€ StatusTracker.ts
â”‚   â”‚   â””â”€â”€ MetricsCollector.ts
â”‚   â””â”€â”€ types.ts
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma
â””â”€â”€ package.json
```

node-cronìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§í•˜ê³ ,
Bull í ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì•ˆì •ì ì¸ í ê´€ë¦¬í•´ì¤˜.
```

---

### í”„ë¡¬í”„íŠ¸ 2-2: API Gateway DDL ì—°ë™

```
Night Builderì—ì„œ API Gatewayë¡œ DDL ìš”ì²­ì„ ë³´ë‚´ëŠ” ëª¨ë“ˆì„ ë§Œë“¤ì–´ì¤˜.

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **DDL ìš”ì²­ ìƒì„±**
   - AI ë¶„ì„ ê²°ê³¼ì˜ DDL ë³€ê²½ì‚¬í•­ì„ API Gateway í˜•ì‹ìœ¼ë¡œ ë³€í™˜
   - ìš”ì²­ IDì™€ ì—°ê²°í•˜ì—¬ ì¶”ì  ê°€ëŠ¥í•˜ê²Œ

2. **ìš”ì²­ ìƒíƒœ ê´€ë¦¬**
   - pending: ìš”ì²­ ìƒì„±ë¨
   - approved: ìŠ¹ì¸ë¨ (ìˆ˜ë™ ë˜ëŠ” ìë™)
   - executed: ì‹¤í–‰ ì™„ë£Œ
   - failed: ì‹¤í–‰ ì‹¤íŒ¨

3. **ìë™ ìŠ¹ì¸ ê·œì¹™**
   - ADD_COLUMN (nullable): ìë™ ìŠ¹ì¸
   - CREATE_TABLE: ìë™ ìŠ¹ì¸
   - ALTER_COLUMN, DROP: ìˆ˜ë™ ìŠ¹ì¸ í•„ìš”

4. **ì‹¤í–‰ ëŒ€ê¸°**
   - DDLì´ ì‹¤í–‰ë  ë•Œê¹Œì§€ ì½”ë“œ êµ¬í˜„ ëŒ€ê¸°
   - íƒ€ì„ì•„ì›ƒ ì„¤ì • (ê¸°ë³¸: 30ë¶„)
   - íƒ€ì„ì•„ì›ƒ ì‹œ ìš”ì²­ ì‹¤íŒ¨ ì²˜ë¦¬

## API Gateway ì—°ë™

```typescript
// API Gateway DDL ìš”ì²­ í˜•ì‹
interface DDLRequest {
  id: string;
  requestId: string;       // Night Builder ìš”ì²­ ID
  projectId: string;
  
  changes: DDLChange[];
  
  autoApprove: boolean;
  requester: string;
  reason: string;
  
  status: 'pending' | 'approved' | 'executing' | 'executed' | 'failed';
  
  createdAt: string;
  executedAt?: string;
}

interface DDLChange {
  type: 'CREATE_TABLE' | 'ALTER_TABLE' | 'ADD_COLUMN' | 'ALTER_COLUMN' | 'DROP_COLUMN' | 'ADD_INDEX' | 'DROP_TABLE';
  database: string;
  table: string;
  description: string;
  sql: string;
  rollbackSql: string;  // ë¡¤ë°± SQL
  riskLevel: 'low' | 'medium' | 'high';
}

// DDL Handler
class DDLHandler {
  private apiGatewayUrl: string;
  
  async requestDDL(request: FeatureRequest): Promise<DDLRequest> {
    const ddlRequest: DDLRequest = {
      id: generateId(),
      requestId: request.id,
      projectId: request.projectId,
      changes: request.analysis.ddlChanges.map(change => ({
        ...change,
        rollbackSql: this.generateRollbackSQL(change),
        riskLevel: this.assessRisk(change),
      })),
      autoApprove: this.canAutoApprove(request.analysis.ddlChanges),
      requester: 'night-builder',
      reason: `Feature Request: ${request.title}`,
      status: 'pending',
      createdAt: new Date().toISOString(),
    };
    
    // API Gatewayë¡œ ì „ì†¡
    const response = await fetch(`${this.apiGatewayUrl}/api/ddl/requests`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(ddlRequest),
    });
    
    return response.json();
  }
  
  async waitForExecution(ddlRequestId: string, timeoutMs: number): Promise<boolean> {
    // í´ë§ìœ¼ë¡œ ìƒíƒœ í™•ì¸
    const startTime = Date.now();
    
    while (Date.now() - startTime < timeoutMs) {
      const status = await this.checkStatus(ddlRequestId);
      
      if (status === 'executed') return true;
      if (status === 'failed') throw new Error('DDL execution failed');
      
      await sleep(10000); // 10ì´ˆ ê°„ê²© ì²´í¬
    }
    
    throw new Error('DDL execution timeout');
  }
  
  private canAutoApprove(changes: DDLChange[]): boolean {
    return changes.every(c => 
      c.type === 'CREATE_TABLE' ||
      (c.type === 'ADD_COLUMN' && c.sql.includes('NULL')) ||
      c.type === 'ADD_INDEX'
    );
  }
}
```

API Gatewayì—ì„œ DDL ìƒíƒœê°€ ë³€ê²½ë˜ë©´ 
WebSocket ë˜ëŠ” Webhookìœ¼ë¡œ ì•Œë¦¼ë°›ì„ ìˆ˜ ìˆê²Œ í•´ì¤˜.
```

---

## Part 3: AI Orchestra ì—°ë™

### í”„ë¡¬í”„íŠ¸ 3-1: Implementation Runner

```
Night Builderì—ì„œ AI Orchestraë¥¼ í˜¸ì¶œí•˜ì—¬ ì‹¤ì œ êµ¬í˜„ì„ ìˆ˜í–‰í•˜ëŠ” 
ImplementationRunnerë¥¼ ë§Œë“¤ì–´ì¤˜.

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **êµ¬í˜„ ì „ ì¤€ë¹„**
   - Git ì €ì¥ì†Œ ìµœì‹ í™” (pull)
   - feature/{request-id} ë¸Œëœì¹˜ ìƒì„±
   - ì˜ì¡´ì„± ì„¤ì¹˜ (npm install)

2. **AI Orchestra ì‹¤í–‰**
   - ë³µì¡ë„ì— ë”°ë¥¸ ëª¨ë“œ ì„ íƒ
     - simple: ë‹¨ìˆœ ìˆ˜ì •
     - medium: ì¤‘ê°„ ê·œëª¨ ê¸°ëŠ¥
     - full: ë³µì¡í•œ ê¸°ëŠ¥ (Planner í¬í•¨)
   - ìš”ì²­ ë¶„ì„ ê²°ê³¼ë¥¼ ì»¨í…ìŠ¤íŠ¸ë¡œ ì „ë‹¬
   - ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸

3. **êµ¬í˜„ í”„ë¡¬í”„íŠ¸ ìƒì„±**

```typescript
const buildImplementationPrompt = (request: FeatureRequest): string => `
# ê¸°ëŠ¥ êµ¬í˜„ ìš”ì²­

## ìš”ì²­ ì •ë³´
- ì œëª©: ${request.title}
- ìœ í˜•: ${request.type}
- ìš°ì„ ìˆœìœ„: ${request.priority}

## ìš”ì²­ ìƒì„¸
${request.description}

## AI ë¶„ì„ ê²°ê³¼
${JSON.stringify(request.analysis, null, 2)}

## í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸
- ê¸°ìˆ  ìŠ¤íƒ: React 18, Node.js 20, TypeScript 5, PostgreSQL 15
- ìŠ¤íƒ€ì¼: Tailwind CSS, shadcn/ui
- API: REST, /api/** ê²½ë¡œ

## ì§€ì‹œì‚¬í•­

1. ë¶„ì„ ê²°ê³¼ì˜ requiredChangesë¥¼ ìˆœì„œëŒ€ë¡œ êµ¬í˜„í•˜ì„¸ìš”
2. affectedFilesì— ëª…ì‹œëœ íŒŒì¼ë“¤ì„ ìˆ˜ì •í•˜ì„¸ìš”
3. ê¸°ì¡´ ì½”ë“œ ìŠ¤íƒ€ì¼ê³¼ íŒ¨í„´ì„ ë”°ë¥´ì„¸ìš”
4. TypeScript íƒ€ì…ì„ ì •í™•íˆ ì •ì˜í•˜ì„¸ìš”
5. ì—ëŸ¬ í•¸ë“¤ë§ì„ í¬í•¨í•˜ì„¸ìš”
6. í•„ìš”í•œ ê²½ìš° í…ŒìŠ¤íŠ¸ ì½”ë“œë„ ì‘ì„±í•˜ì„¸ìš”

## DDL ì •ë³´ (ì´ë¯¸ ì ìš©ë¨)
${request.analysis.ddlChanges?.map(d => d.sql).join('\n') || 'ì—†ìŒ'}

## ì£¼ì˜ì‚¬í•­
${request.analysis.risks?.join('\n') || 'ì—†ìŒ'}
`;
```

4. **ì§„í–‰ ìƒí™© ì¶”ì **
   - AI Orchestra ì¶œë ¥ íŒŒì‹±
   - ë‹¨ê³„ë³„ ì§„í–‰ë¥  ê³„ì‚°
   - DB ë° WebSocketìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸

5. **ê²°ê³¼ ìˆ˜ì§‘**
   - ë³€ê²½ëœ íŒŒì¼ ëª©ë¡
   - ì»¤ë°‹ ë©”ì‹œì§€ ìƒì„±
   - êµ¬í˜„ ìš”ì•½

## êµ¬í˜„

```typescript
// src/processor/ImplementationRunner.ts

import { spawn } from 'child_process';
import { FeatureRequest } from '../types';

interface ImplementationResult {
  success: boolean;
  changedFiles: string[];
  commitHash?: string;
  summary: string;
  logs: string[];
  duration: number;
}

export class ImplementationRunner {
  constructor(
    private orchestraPath: string,
    private workspacePath: string,
    private config: RunnerConfig
  ) {}

  async run(request: FeatureRequest): Promise<ImplementationResult> {
    const projectPath = path.join(this.workspacePath, request.projectId);
    const startTime = Date.now();
    const logs: string[] = [];
    
    try {
      // 1. Git ì¤€ë¹„
      await this.updateStatus(request.id, 'implementing', 10, 'Git ì €ì¥ì†Œ ì¤€ë¹„ ì¤‘...');
      await this.prepareGit(projectPath, request);
      
      // 2. ì˜ì¡´ì„± ì„¤ì¹˜ (ìƒˆ íŒ¨í‚¤ì§€ê°€ ìˆëŠ” ê²½ìš°)
      if (request.analysis.externalDependencies?.length) {
        await this.updateStatus(request.id, 'implementing', 20, 'ì˜ì¡´ì„± ì„¤ì¹˜ ì¤‘...');
        await this.installDependencies(projectPath, request.analysis.externalDependencies);
      }
      
      // 3. AI Orchestra ì‹¤í–‰
      await this.updateStatus(request.id, 'implementing', 30, 'AI êµ¬í˜„ ì‹œì‘...');
      const prompt = this.buildImplementationPrompt(request);
      const mode = this.selectMode(request.analysis.estimatedComplexity);
      
      const orchestraResult = await this.runOrchestra(projectPath, prompt, mode, (progress, message) => {
        this.updateStatus(request.id, 'implementing', 30 + (progress * 0.5), message);
        logs.push(message);
      });
      
      // 4. ê²°ê³¼ í™•ì¸
      const changedFiles = await this.getChangedFiles(projectPath);
      
      // 5. ì»¤ë°‹
      await this.updateStatus(request.id, 'implementing', 90, 'ë³€ê²½ì‚¬í•­ ì»¤ë°‹ ì¤‘...');
      const commitHash = await this.commitChanges(projectPath, request);
      
      return {
        success: true,
        changedFiles,
        commitHash,
        summary: orchestraResult.summary,
        logs,
        duration: Date.now() - startTime,
      };
      
    } catch (error) {
      logs.push(`Error: ${error.message}`);
      
      // ë¡¤ë°±
      await this.rollback(projectPath, request);
      
      return {
        success: false,
        changedFiles: [],
        summary: `êµ¬í˜„ ì‹¤íŒ¨: ${error.message}`,
        logs,
        duration: Date.now() - startTime,
      };
    }
  }

  private selectMode(complexity: string): 'simple' | 'medium' | 'full' {
    switch (complexity) {
      case 'simple': return 'simple';
      case 'medium': return 'medium';
      case 'complex': return 'full';
      default: return 'medium';
    }
  }

  private async runOrchestra(
    projectPath: string,
    prompt: string,
    mode: string,
    onProgress: (progress: number, message: string) => void
  ): Promise<{ summary: string }> {
    return new Promise((resolve, reject) => {
      const process = spawn(this.orchestraPath, [
        'run', prompt,
        '--path', projectPath,
        '--mode', mode,
        '--auto-fix',
        '--no-dashboard',
      ]);
      
      let output = '';
      
      process.stdout.on('data', (data) => {
        const text = data.toString();
        output += text;
        
        // ì§„í–‰ ìƒí™© íŒŒì‹±
        const progress = this.parseProgress(text);
        if (progress) {
          onProgress(progress.percent, progress.message);
        }
      });
      
      process.on('close', (code) => {
        if (code === 0) {
          resolve({ summary: this.parseSummary(output) });
        } else {
          reject(new Error(`Orchestra failed with code ${code}`));
        }
      });
    });
  }
}
```

í…ŒìŠ¤íŠ¸ ì‹¤í–‰ê³¼ ë°°í¬ê¹Œì§€ ì´ì–´ì§€ë„ë¡ 
ì „ì²´ íŒŒì´í”„ë¼ì¸ì„ ì™„ì„±í•´ì¤˜.
```

---

### í”„ë¡¬í”„íŠ¸ 3-2: í…ŒìŠ¤íŠ¸ ë° ë°°í¬ í•¸ë“¤ëŸ¬

```
êµ¬í˜„ ì™„ë£Œ í›„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ê³¼ ìë™ ë°°í¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ëª¨ë“ˆì„ ë§Œë“¤ì–´ì¤˜.

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **í…ŒìŠ¤íŠ¸ ì‹¤í–‰**
   - npm test
   - npm run lint
   - npm run type-check
   - E2E í…ŒìŠ¤íŠ¸ (ì„¤ì •ëœ ê²½ìš°)

2. **í…ŒìŠ¤íŠ¸ ê²°ê³¼ íŒë‹¨**
   - ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ â†’ ë°°í¬ ì§„í–‰
   - í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ â†’ AIì—ê²Œ ìˆ˜ì • ìš”ì²­ (1íšŒ ì¬ì‹œë„)
   - ì¬ì‹œë„ë„ ì‹¤íŒ¨ â†’ ìš”ì²­ ì‹¤íŒ¨ ì²˜ë¦¬

3. **ë°°í¬**
   - Git push (feature ë¸Œëœì¹˜)
   - PR ìƒì„± ë˜ëŠ” mainì— ì§ì ‘ ë¨¸ì§€ (ì„¤ì •ì— ë”°ë¼)
   - ArgoCD Sync íŠ¸ë¦¬ê±° (ì„ íƒ)

4. **ë¡¤ë°± ì§€ì›**
   - ë°°í¬ í›„ í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨ ì‹œ ìë™ ë¡¤ë°±
   - ì´ì „ ì»¤ë°‹ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°

## êµ¬í˜„

```typescript
// src/processor/TestRunner.ts

interface TestResult {
  passed: boolean;
  results: {
    unit: { passed: boolean; output: string };
    lint: { passed: boolean; output: string };
    typeCheck: { passed: boolean; output: string };
    e2e?: { passed: boolean; output: string };
  };
  summary: string;
}

export class TestRunner {
  async runTests(projectPath: string, config: TestConfig): Promise<TestResult> {
    const results: TestResult['results'] = {
      unit: { passed: false, output: '' },
      lint: { passed: false, output: '' },
      typeCheck: { passed: false, output: '' },
    };
    
    // Unit tests
    const unitResult = await this.exec('npm', ['test', '--', '--passWithNoTests'], projectPath);
    results.unit = { passed: unitResult.code === 0, output: unitResult.output };
    
    // Lint
    const lintResult = await this.exec('npm', ['run', 'lint'], projectPath);
    results.lint = { passed: lintResult.code === 0, output: lintResult.output };
    
    // Type check
    const typeResult = await this.exec('npx', ['tsc', '--noEmit'], projectPath);
    results.typeCheck = { passed: typeResult.code === 0, output: typeResult.output };
    
    // E2E (optional)
    if (config.runE2E) {
      const e2eResult = await this.exec('npm', ['run', 'test:e2e'], projectPath);
      results.e2e = { passed: e2eResult.code === 0, output: e2eResult.output };
    }
    
    const passed = results.unit.passed && 
                   results.lint.passed && 
                   results.typeCheck.passed &&
                   (!results.e2e || results.e2e.passed);
    
    return {
      passed,
      results,
      summary: this.generateSummary(results),
    };
  }
}

// src/processor/DeploymentHandler.ts

interface DeploymentResult {
  success: boolean;
  prUrl?: string;
  deployedCommit?: string;
  deployedAt?: string;
  healthCheckPassed?: boolean;
}

export class DeploymentHandler {
  constructor(
    private bitbucketApi: BitbucketAPI,
    private argocdApi: ArgoCDAPI,
    private config: DeploymentConfig
  ) {}

  async deploy(
    projectPath: string,
    request: FeatureRequest,
    commitHash: string
  ): Promise<DeploymentResult> {
    
    // 1. Push feature branch
    await this.gitPush(projectPath, `feature/${request.id}`);
    
    if (this.config.requirePR) {
      // 2a. PR ìƒì„±
      const pr = await this.bitbucketApi.createPR({
        title: `[Auto] ${request.title}`,
        description: this.generatePRDescription(request),
        sourceBranch: `feature/${request.id}`,
        targetBranch: request.analysis.targetBranch || 'main',
        reviewers: this.config.defaultReviewers,
      });
      
      return {
        success: true,
        prUrl: pr.url,
        deployedCommit: commitHash,
      };
      
    } else {
      // 2b. ì§ì ‘ ë¨¸ì§€ & ë°°í¬
      await this.gitMergeToMain(projectPath, `feature/${request.id}`);
      await this.gitPush(projectPath, 'main');
      
      // ArgoCD Sync
      if (this.config.autoSync) {
        await this.argocdApi.sync(request.projectId);
        
        // Health check
        const healthy = await this.waitForHealthy(request.projectId, 300000); // 5ë¶„
        
        if (!healthy) {
          // ë¡¤ë°±
          await this.argocdApi.rollback(request.projectId);
          return {
            success: false,
            healthCheckPassed: false,
          };
        }
      }
      
      return {
        success: true,
        deployedCommit: commitHash,
        deployedAt: new Date().toISOString(),
        healthCheckPassed: true,
      };
    }
  }

  private generatePRDescription(request: FeatureRequest): string {
    return `
## ğŸ¤– AI ìë™ êµ¬í˜„

### ìš”ì²­ ì •ë³´
- **ìš”ì²­ ID**: ${request.id}
- **ìš”ì²­ì**: ${request.requesterName}
- **ìœ í˜•**: ${request.type}

### ìš”ì²­ ë‚´ìš©
${request.description}

### ë³€ê²½ ì‚¬í•­
${request.result?.changedFiles?.map(f => `- \`${f}\``).join('\n')}

### AI ë¶„ì„
- ë³µì¡ë„: ${request.analysis.estimatedComplexity}
- ì˜ˆìƒ ì‹œê°„: ${request.analysis.estimatedTime}

---
*ì´ PRì€ JABIS Night Builderì— ì˜í•´ ìë™ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*
    `;
  }
}
```

í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì‹œ AIì—ê²Œ ìˆ˜ì • ìš”ì²­í•˜ëŠ” ë¡œì§ë„ í¬í•¨í•´ì¤˜.
```

---

## Part 4: ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ

### í”„ë¡¬í”„íŠ¸ 4-1: Night Builder ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ

```
React + TypeScriptë¡œ Night Builder ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œë¥¼ ë§Œë“¤ì–´ì¤˜.

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **ì‹¤ì‹œê°„ í˜„í™©**
   - í˜„ì¬ ì²˜ë¦¬ ì¤‘ì¸ ìš”ì²­
   - ëŒ€ê¸° í ìƒíƒœ
   - Night Builder ìš´ì˜ ìƒíƒœ (í™œì„±/ëŒ€ê¸°/ì˜¤ë¥˜)

2. **ìš”ì²­ ê´€ë¦¬**
   - ì „ì²´ ìš”ì²­ ëª©ë¡ (í•„í„°: ìƒíƒœ, í”„ë¡œì íŠ¸, ë‚ ì§œ)
   - ìš”ì²­ ìƒì„¸ ë³´ê¸°
   - ìˆ˜ë™ ì¬ì‹œë„
   - ìš”ì²­ ì·¨ì†Œ
   - ìš°ì„ ìˆœìœ„ ë³€ê²½

3. **ìŠ¤ì¼€ì¤„ ì„¤ì •**
   - ìš´ì˜ ì‹œê°„ ì„¤ì •
   - ë™ì‹œ ì²˜ë¦¬ ìˆ˜ ì„¤ì •
   - í”„ë¡œì íŠ¸ë³„ ì„¤ì •

4. **í†µê³„**
   - ì¼ë³„/ì£¼ë³„/ì›”ë³„ ì²˜ë¦¬ í˜„í™©
   - ì„±ê³µë¥ 
   - í‰ê·  ì²˜ë¦¬ ì‹œê°„
   - í”„ë¡œì íŠ¸ë³„ í†µê³„

5. **DDL ìŠ¹ì¸ ê´€ë¦¬**
   - ìŠ¹ì¸ ëŒ€ê¸° DDL ëª©ë¡
   - ìŠ¹ì¸/ê±°ë¶€ ì²˜ë¦¬
   - DDL ì‹¤í–‰ íˆìŠ¤í† ë¦¬

6. **ë¡œê·¸ ë·°ì–´**
   - ì‹¤ì‹œê°„ ë¡œê·¸ ìŠ¤íŠ¸ë¦¼
   - ìš”ì²­ë³„ ë¡œê·¸ ì¡°íšŒ

## í˜ì´ì§€ êµ¬ì¡°

```
/dashboard
â”œâ”€â”€ /                     # ë©”ì¸ ëŒ€ì‹œë³´ë“œ (í˜„í™©)
â”œâ”€â”€ /requests             # ìš”ì²­ ëª©ë¡
â”œâ”€â”€ /requests/:id         # ìš”ì²­ ìƒì„¸
â”œâ”€â”€ /ddl                  # DDL ìŠ¹ì¸ ê´€ë¦¬
â”œâ”€â”€ /settings             # ì„¤ì •
â”œâ”€â”€ /logs                 # ë¡œê·¸ ë·°ì–´
â””â”€â”€ /stats                # í†µê³„
```

## UI ë””ìì¸ (ë©”ì¸ ëŒ€ì‹œë³´ë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ™ JABIS Night Builder                                    [ì„¤ì •] [ë¡œê·¸ì•„ì›ƒ] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚  ğŸ”„ ì²˜ë¦¬ ì¤‘      â”‚  â”‚  â³ ëŒ€ê¸° ì¤‘      â”‚  â”‚  âœ… ì˜¤ëŠ˜ ì™„ë£Œ    â”‚             â”‚
â”‚  â”‚       2        â”‚  â”‚       12       â”‚  â”‚       8        â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                             â”‚
â”‚  ìš´ì˜ ìƒíƒœ: ğŸŸ¢ ì•¼ê°„ ëª¨ë“œ í™œì„± (22:00 ~ 06:00)                                â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  í˜„ì¬ ì²˜ë¦¬ ì¤‘                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ #REQ-001 â”‚ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ â”‚ project-a â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80% â”‚ 23ë¶„ â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ #REQ-002 â”‚ í†µê³„ ì°¨íŠ¸ ì¶”ê°€    â”‚ project-b â”‚ â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 30% â”‚ 5ë¶„  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ëŒ€ê¸° í (ë‹¤ìŒ 5ê°œ)                                           [ì „ì²´ë³´ê¸°] â”‚ â”‚
â”‚  â”‚                                                                       â”‚ â”‚
â”‚  â”‚  1. #REQ-003 â”‚ ğŸ”´ ê¸´ê¸‰ â”‚ íšŒì›ê°€ì… í•„ë“œ ì¶”ê°€ â”‚ project-a â”‚ DDL í•„ìš”   â”‚ â”‚
â”‚  â”‚  2. #REQ-004 â”‚ ğŸŸ¡ ë³´í†µ â”‚ ê²€ìƒ‰ í•„í„° ê°œì„      â”‚ project-c â”‚           â”‚ â”‚
â”‚  â”‚  3. #REQ-005 â”‚ ğŸŸ¡ ë³´í†µ â”‚ í˜ì´ì§€ë„¤ì´ì…˜ ì¶”ê°€  â”‚ project-a â”‚           â”‚ â”‚
â”‚  â”‚  ...                                                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
jabis-night-builder-dashboard/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”œâ”€â”€ Requests/
â”‚   â”‚   â”‚   â”œâ”€â”€ RequestList.tsx
â”‚   â”‚   â”‚   â””â”€â”€ RequestDetail.tsx
â”‚   â”‚   â”œâ”€â”€ DDLApproval.tsx
â”‚   â”‚   â”œâ”€â”€ Settings.tsx
â”‚   â”‚   â”œâ”€â”€ Logs.tsx
â”‚   â”‚   â””â”€â”€ Stats.tsx
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ StatusCard.tsx
â”‚   â”‚   â”œâ”€â”€ ProcessingItem.tsx
â”‚   â”‚   â”œâ”€â”€ QueueList.tsx
â”‚   â”‚   â”œâ”€â”€ ProgressBar.tsx
â”‚   â”‚   â”œâ”€â”€ LogViewer.tsx
â”‚   â”‚   â””â”€â”€ StatsChart.tsx
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useNightBuilder.ts
â”‚   â”‚   â”œâ”€â”€ useRequests.ts
â”‚   â”‚   â””â”€â”€ useSocket.ts
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ nightBuilderApi.ts
â””â”€â”€ package.json
```

Vite + React Query + Socket.IOë¡œ ë§Œë“¤ê³ ,
Rechartsë¡œ í†µê³„ ì°¨íŠ¸ êµ¬í˜„í•´ì¤˜.
```

---

## Part 5: í†µí•© ë° ì„¤ì •

### í”„ë¡¬í”„íŠ¸ 5-1: í”„ë¡œì íŠ¸ ì„¤ì • ê´€ë¦¬

```
Night Builderì—ì„œ í”„ë¡œì íŠ¸ë³„ ì„¤ì •ì„ ê´€ë¦¬í•˜ëŠ” ì‹œìŠ¤í…œì„ ë§Œë“¤ì–´ì¤˜.

## ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

1. **í”„ë¡œì íŠ¸ ì„¤ì •**
   ```typescript
   interface ProjectConfig {
     id: string;
     name: string;
     repoUrl: string;
     defaultBranch: string;
     
     // Night Builder ì„¤ì •
     nightBuilder: {
       enabled: boolean;
       
       // ë°°í¬ ì„¤ì •
       deployment: {
         autoDeploy: boolean;     // ìë™ ë°°í¬ ì—¬ë¶€
         requirePR: boolean;      // PR í•„ìˆ˜ ì—¬ë¶€
         defaultReviewers: string[];
         autoMergeOnPass: boolean;
       };
       
       // í…ŒìŠ¤íŠ¸ ì„¤ì •
       testing: {
         runUnit: boolean;
         runLint: boolean;
         runTypeCheck: boolean;
         runE2E: boolean;
         e2eCommand?: string;
       };
       
       // DDL ì„¤ì •
       ddl: {
         autoApproveAddColumn: boolean;
         autoApproveCreateTable: boolean;
         requireManualApproval: string[];  // í•­ìƒ ìˆ˜ë™ ìŠ¹ì¸ í•„ìš”í•œ í…Œì´ë¸”
       };
       
       // ì œí•œ ì„¤ì •
       limits: {
         maxRequestsPerDay: number;
         maxConcurrent: number;
         timeoutMinutes: number;
       };
       
       // ì•Œë¦¼ ì„¤ì •
       notifications: {
         slack?: string;
         email?: string[];
         onSuccess: boolean;
         onFailure: boolean;
       };
     };
     
     // AI ì„¤ì •
     ai: {
       model: 'haiku' | 'sonnet' | 'opus';
       maxTokens: number;
       temperature: number;
     };
   }
   ```

2. **ê¸€ë¡œë²Œ ì„¤ì •**
   ```typescript
   interface GlobalConfig {
     // ìš´ì˜ ì‹œê°„
     operatingHours: {
       enabled: boolean;
       start: string;  // "22:00"
       end: string;    // "06:00"
       timezone: string;
       excludeDates: string[];  // ì œì™¸ ë‚ ì§œ (íœ´ì¼ ë“±)
     };
     
     // ë¦¬ì†ŒìŠ¤ ì œí•œ
     resources: {
       maxTotalConcurrent: number;
       cpuLimit: string;
       memoryLimit: string;
     };
     
     // ê¸°ë³¸ê°’
     defaults: {
       model: string;
       timeout: number;
       maxRetries: number;
     };
   }
   ```

3. **ì„¤ì • UI**
   - í”„ë¡œì íŠ¸ ëª©ë¡ ë° ì„¤ì •
   - ê¸€ë¡œë²Œ ì„¤ì •
   - ì„¤ì • ê°€ì ¸ì˜¤ê¸°/ë‚´ë³´ë‚´ê¸°

í”„ë¡œì íŠ¸ ì„¤ì • CRUD APIì™€ ì„¤ì • UIë¥¼ ë§Œë“¤ì–´ì¤˜.
```

---

### í”„ë¡¬í”„íŠ¸ 5-2: Helm Chart ë° ë°°í¬

```
JABIS Night Builder ì „ì²´ ì‹œìŠ¤í…œì„ K3Sì— ë°°í¬í•˜ëŠ” Helm Chartë¥¼ ë§Œë“¤ì–´ì¤˜.

## êµ¬ì„± ìš”ì†Œ

1. **jabis-night-builder** (ë©”ì¸ ì„œë¹„ìŠ¤)
   - Queue Processor
   - Scheduler
   - API Server

2. **jabis-request-api** (ìš”ì²­ API)
   - ì±—ë´‡ì—ì„œ í˜¸ì¶œí•˜ëŠ” API

3. **jabis-night-builder-dashboard** (ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ)
   - ëª¨ë‹ˆí„°ë§ UI

4. **ì˜ì¡´ì„±**
   - Redis (Bull Queueìš©)
   - PostgreSQL (ê¸°ì¡´ jabis-db ì‚¬ìš©)

## values.yaml

```yaml
global:
  imageRegistry: harbor.jinhak.com/jabis

nightBuilder:
  replicaCount: 1  # ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” 1ê°œë§Œ
  
  config:
    operatingHours:
      enabled: true
      start: "22:00"
      end: "06:00"
      timezone: "Asia/Seoul"
    
    concurrency:
      maxTotal: 3
      maxPerProject: 1
    
    orchestraPath: "/usr/local/bin/ai-orchestra"
  
  workspace:
    storageClass: "local-path"
    size: "50Gi"
  
  resources:
    limits:
      cpu: "2"
      memory: "4Gi"

requestApi:
  replicaCount: 2
  ingress:
    enabled: true
    host: jabis-request.jinhak.com

dashboard:
  replicaCount: 1
  ingress:
    enabled: true
    host: jabis-night.jinhak.com

redis:
  enabled: true
  # ë˜ëŠ” external:
  # external:
  #   host: redis.jabis.svc.cluster.local
  #   port: 6379

database:
  external:
    host: jabis-db.jabis.svc.cluster.local
    port: 5432
    database: jabis_night_builder

apiGateway:
  url: http://jabis-gateway.jabis.svc.cluster.local
```

Helm Chart ì „ì²´ êµ¬ì¡°ì™€ ì„¤ì¹˜ ê°€ì´ë“œë¥¼ ë§Œë“¤ì–´ì¤˜.
```

---

## ì „ì²´ ì‹œìŠ¤í…œ ì—°ë™ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                ì „ì²´ ì‹œìŠ¤í…œ íë¦„                                   â”‚
â”‚                                                                                 â”‚
â”‚  [09:00] ë¹„ê°œë°œì A: "ê²€ìƒ‰ ê²°ê³¼ì— ì •ë ¬ ê¸°ëŠ¥ ì¶”ê°€í•´ì£¼ì„¸ìš”"                          â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   AI ìš”ì²­ ì±—ë´‡      â”‚  â†’ POST /api/requests                                  â”‚
â”‚  â”‚   (JABIS ì‚¬ì´íŠ¸)    â”‚  â†’ ìš”ì²­ ì €ì¥ (status: submitted)                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   Planner AI ë¶„ì„   â”‚  â†’ ë³µì¡ë„: medium                                      â”‚
â”‚  â”‚                     â”‚  â†’ DDL: ë¶ˆí•„ìš”                                         â”‚
â”‚  â”‚                     â”‚  â†’ ì˜ˆìƒ ì‹œê°„: 2ì‹œê°„                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   Request Queue     â”‚  â†’ status: queued                                     â”‚
â”‚  â”‚   (Bull + Redis)    â”‚  â†’ queue position: 5                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                 â”‚
â”‚  [22:00] Night Builder í™œì„±í™”                                                   â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   Queue Processor   â”‚  â†’ íì—ì„œ ìš”ì²­ ê°€ì ¸ì˜¤ê¸°                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚  DDL í•„ìš” ì—¬ë¶€ í™•ì¸  â”‚â”€â”€â”€â”€â–¶â”‚  API Gateway ìš”ì²­   â”‚ (DDL í•„ìš”ì‹œ)               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  DDL ì‹¤í–‰ ëŒ€ê¸°      â”‚                           â”‚
â”‚                â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   Git ì¤€ë¹„          â”‚  â†’ git pull                                           â”‚
â”‚  â”‚                     â”‚  â†’ git checkout -b feature/REQ-001                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   AI Orchestra      â”‚  â†’ mode: medium                                       â”‚
â”‚  â”‚   ì‹¤í–‰              â”‚  â†’ Coder + Debugger                                   â”‚
â”‚  â”‚                     â”‚  â†’ ì½”ë“œ êµ¬í˜„                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   í…ŒìŠ¤íŠ¸ ì‹¤í–‰       â”‚  â†’ npm test âœ“                                         â”‚
â”‚  â”‚                     â”‚  â†’ npm run lint âœ“                                     â”‚
â”‚  â”‚                     â”‚  â†’ tsc --noEmit âœ“                                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   ë°°í¬              â”‚  â†’ git push                                           â”‚
â”‚  â”‚                     â”‚  â†’ PR ìƒì„± ë˜ëŠ” ìë™ ë¨¸ì§€                              â”‚
â”‚  â”‚                     â”‚  â†’ ArgoCD Sync                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                â”‚                                                                â”‚
â”‚                â–¼                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        â”‚
â”‚  â”‚   ì™„ë£Œ ì²˜ë¦¬         â”‚  â†’ status: completed                                  â”‚
â”‚  â”‚                     â”‚  â†’ ì•Œë¦¼ ì „ì†¡                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                 â”‚
â”‚  [09:00 ë‹¤ìŒë‚ ] ë¹„ê°œë°œì A ì¶œê·¼                                                  â”‚
â”‚                                                                                 â”‚
â”‚  ğŸ“± ì•Œë¦¼: "ìš”ì²­í•˜ì‹  'ê²€ìƒ‰ ê²°ê³¼ ì •ë ¬ ê¸°ëŠ¥'ì´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤!"                       â”‚
â”‚  ğŸ”— ë§í¬: ë°°í¬ëœ í˜ì´ì§€ì—ì„œ í™•ì¸                                                 â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## êµ¬í˜„ ë¡œë“œë§µ

```
Week 1                    Week 2                    Week 3
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â”‚                        â”‚                        â”‚
â”‚  AI ìš”ì²­ ì±—ë´‡ UI       â”‚  Request Queue         â”‚  Implementation        â”‚
â”‚  (í”„ë¡¬í”„íŠ¸ 1-1)        â”‚  (í”„ë¡¬í”„íŠ¸ 2-1)        â”‚  Runner                â”‚
â”‚                        â”‚                        â”‚  (í”„ë¡¬í”„íŠ¸ 3-1)        â”‚
â”‚  ìš”ì²­ ë¶„ì„ API         â”‚  DDL Handler           â”‚                        â”‚
â”‚  (í”„ë¡¬í”„íŠ¸ 1-2)        â”‚  (í”„ë¡¬í”„íŠ¸ 2-2)        â”‚  Test & Deploy         â”‚
â”‚                        â”‚                        â”‚  (í”„ë¡¬í”„íŠ¸ 3-2)        â”‚
â”‚                        â”‚                        â”‚                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                    â”‚
Week 4                    Week 5                    Week 6
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â”‚                        â”‚                        â”‚
â”‚  ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ       â”‚  í”„ë¡œì íŠ¸ ì„¤ì •         â”‚  í†µí•© í…ŒìŠ¤íŠ¸           â”‚
â”‚  (í”„ë¡¬í”„íŠ¸ 4-1)        â”‚  (í”„ë¡¬í”„íŠ¸ 5-1)        â”‚                        â”‚
â”‚                        â”‚                        â”‚  Helm Chart            â”‚
â”‚                        â”‚  Helm Chart            â”‚  ë°°í¬                  â”‚
â”‚                        â”‚  (í”„ë¡¬í”„íŠ¸ 5-2)        â”‚                        â”‚
â”‚                        â”‚                        â”‚  ë¬¸ì„œí™”                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **ìš”ì²­ ê²€ì¦**
   - ì•…ì˜ì  ì½”ë“œ ì‹¤í–‰ ë°©ì§€
   - í—ˆìš©ëœ í”„ë¡œì íŠ¸ë§Œ ì²˜ë¦¬
   - ìš”ì²­ ë‚´ìš© í•„í„°ë§

2. **Git ê¶Œí•œ**
   - ì „ìš© ì„œë¹„ìŠ¤ ê³„ì • ì‚¬ìš©
   - ìµœì†Œ ê¶Œí•œ ì›ì¹™ (íŠ¹ì • ì €ì¥ì†Œë§Œ)
   - ê°ì‚¬ ë¡œê·¸ ê¸°ë¡

3. **DDL ì œí•œ**
   - DROP TABLE ë“± ìœ„í—˜ ëª…ë ¹ ì œí•œ
   - í”„ë¡œë•ì…˜ DB ì§ì ‘ ë³€ê²½ ë¶ˆê°€
   - ë§ˆì´ê·¸ë ˆì´ì…˜ í†µí•œ ë³€ê²½ë§Œ

4. **ë¦¬ì†ŒìŠ¤ ì œí•œ**
   - ì¼ì¼ ìµœëŒ€ ìš”ì²­ ìˆ˜
   - ì‹¤í–‰ ì‹œê°„ ì œí•œ
   - ë©”ëª¨ë¦¬/CPU ì œí•œ

---

## ì¥ì•  ëŒ€ì‘

| ìƒí™© | ëŒ€ì‘ |
|------|------|
| AI Orchestra ì‹¤í–‰ ì‹¤íŒ¨ | ë¡¤ë°± í›„ ì¬ì‹œë„ (ìµœëŒ€ 2íšŒ) |
| í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ | AIì—ê²Œ ìˆ˜ì • ìš”ì²­ í›„ ì¬ì‹œë„ |
| DDL ì‹¤í–‰ ì‹¤íŒ¨ | ìš”ì²­ ì‹¤íŒ¨ ì²˜ë¦¬, ìˆ˜ë™ ê°œì… í•„ìš” |
| ë°°í¬ í›„ í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨ | ArgoCD ìë™ ë¡¤ë°± |
| Night Builder í¬ë˜ì‹œ | ë§ˆì§€ë§‰ ì²˜ë¦¬ ìš”ì²­ë¶€í„° ì¬ì‹œì‘ |
